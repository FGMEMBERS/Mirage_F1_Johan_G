<?xml version="1.0" encoding="UTF-8"?>

<PropertyList>

  <params>
    <!-- Red light on the failure warning panel, NON-RESETTABLE -->
    <oxygen-regulator>/instrumentation/failure-warning-panel/oxygen-regulator</oxygen-regulator>

    <!-- Red lights on the failure warning panel -->
    <battery>/instrumentation/failure-warning-panel/battery</battery>
    <emergency-ac-power>/instrumentation/failure-warning-panel/emergency-ac-power</emergency-ac-power>
    <fuel-pressure-engine>/instrumentation/failure-warning-panel/fuel-pressure-engine</fuel-pressure-engine>
    <oil-pressure>/instrumentation/failure-warning-panel/oil-pressure</oil-pressure>
    <electric-hydraulic-pump>/instrumentation/failure-warning-panel/electric-hydraulic-pump</electric-hydraulic-pump>
    <emergency-hydraulic>/instrumentation/failure-warning-panel/emergency-hydraulic</emergency-hydraulic>
    <cabin-temperature>/instrumentation/failure-warning-panel/cabin-temperature</cabin-temperature>
    <cabin-pressure>/instrumentation/failure-warning-panel/cabin-pressure</cabin-pressure>
    <autopilot>/instrumentation/failure-warning-panel/autopilot</autopilot>
    <alternator-modulation>/instrumentation/failure-warning-panel/alternator-modulation</alternator-modulation>
    <bleed-off-valve>/instrumentation/failure-warning-panel/bleed-off-valve</bleed-off-valve>
    
    <!-- Amber lights on the failure warning panel -->
    <alternator n="0">/instrumentation/failure-warning-panel/alternator[0]</alternator>
    <alternator n="1">/instrumentation/failure-warning-panel/alternator[1]</alternator>
    <transformer-rectifier n="0">/instrumentation/failure-warning-panel/transformer-rectifier[0]</transformer-rectifier>
    <fuel-pressure-pump n="0">/instrumentation/failure-warning-panel/fuel-pressure-pump[0]</fuel-pressure-pump>
    <fuel-pressure-pump n="1">/instrumentation/failure-warning-panel/fuel-pressure-pump[1]</fuel-pressure-pump>
    <transformer-rectifier n="1">/instrumentation/failure-warning-panel/transformer-rectifier[1]</transformer-rectifier>
    <fuel-level>/instrumentation/failure-warning-panel/fuel-level</fuel-level>
    <hydraulic-pressure n="0">/instrumentation/failure-warning-panel/hydraulic-pressure[0]</hydraulic-pressure>
    <hydraulic-pressure n="1">/instrumentation/failure-warning-panel/hydraulic-pressure[1]</hydraulic-pressure>
    <oxygen-level>/instrumentation/failure-warning-panel/oxygen-level</oxygen-level>
    <equipment-temperature>/instrumentation/failure-warning-panel/equipment-temperature</equipment-temperature>
    <autotrim>/instrumentation/failure-warning-panel/autotrim</autotrim>
    <transponder>/instrumentation/failure-warning-panel/transponder</transponder>
    <pitot>/instrumentation/failure-warning-panel/pitot</pitot>
    <air-data-computer>/instrumentation/failure-warning-panel/air-data-computer</air-data-computer>
    <yaw-damper>/instrumentation/failure-warning-panel/yaw-damper</yaw-damper>
    <pitch-damper>/instrumentation/failure-warning-panel/pitch-damper</pitch-damper>
    <roll-damper>/instrumentation/failure-warning-panel/roll-damper</roll-damper>
    <elevator>/instrumentation/failure-warning-panel/elevator</elevator>
    <rudder>/instrumentation/failure-warning-panel/rudder</rudder>
    <slat-flap>/instrumentation/failure-warning-panel/slat-flap</slat-flap>
    
    <!-- Trippers -->
    <trip-master-failure-warning>/instrumentation/master-failure-warning/trip-warning</trip-master-failure-warning>
    <trip-master-failure-caution>/instrumentation/master-failure-warning/trip-caution</trip-master-failure-caution>

    <!-- Master failure warning light -->
    <master-failure-warning>/instrumentation/master-failure-warning/warning</master-failure-warning>
    <master-failure-caution>/instrumentation/master-failure-warning/caution</master-failure-caution>
 
    <!-- Warning horn -->
    <oxygen-regulator-horn>/instrumentation/warning-horn/oxygen-regulator</oxygen-regulator-horn>
    <master-failure-horn>/instrumentation/warning-horn/master-failure</master-failure-horn>
    <limits-horn>/instrumentation/warning-horn/imits</limits-horn>
    <limit-incidence-horn>/instrumentation/warning-horn/limit-incidence</limit-incidence-horn>

    <!-- Master failure warning light and horn reset -->
    <master-failure-warning-reset>/controls/switches/master-failure-warning-reset</master-failure-warning-reset>
  </params>


  <!--
    Experimenting with the oxygen regulator failure warning
    
    What I am trying to do is to have the master failure warning
    enable only if the oxygen regulator warning was not enabled
    before the previous master failure warning light reset.
    
    Otherwise the master failure warning will be always be enabled
    unless the master failure warning always is enabled.
    
    I think that what I really would need is 1) more sleep, and
    2) a state machine.
    
    /Johan G, Sat 31 Jan 2015, 08:33 UTC
  -->

  <logic>
    <name type="string">Test</name>
    <input>
      <property alias="/params/oxygen-regulator"/>
    </input>
    <output>
      <property alias="/params/oxygen-regulator-horn"/>
    </output>
  </logic>

  <flipflop>
    <name type="string">Trip master failure warning</name>
    <type>RS</type>
    <S>
      <property alias="/params/oxygen-regulator"/>
    </S>
    <R>
      <property alias="/params/master-failure-warning"/>
    </R>
    <output>
      <property alias="/params/trip-master-failure-warning"/>
    </output>
  </flipflop>

  <flipflop>
    <name type="string">Master failure warning</name>
    <type>RS</type>
    <S>
      <property alias="/params/trip-master-failure-warning"/>
    </S>
    <R>
      <property alias="/params/master-failure-warning-reset"/>
    </R>
    <output>
      <property alias="/params/master-failure-warning"/>
    </output>
  </flipflop>

</PropertyList>
